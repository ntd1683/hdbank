"use strict";(self.webpackChunkhdbank=self.webpackChunkhdbank||[]).push([[7700],{5505:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>a,default:()=>d,frontMatter:()=>c,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"session1/practice-aws-openai","title":"Th\u1ef1c H\xe0nh AWS + Open AI","description":"AWS","source":"@site/docs/session1/practice-aws-openai.md","sourceDirName":"session1","slug":"/session1/practice-aws-openai","permalink":"/hdbank/docs/session1/practice-aws-openai","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/session1/practice-aws-openai.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"session1Sidebar","previous":{"title":"OpenAI","permalink":"/hdbank/docs/session1/what-is-open-ai"}}');var l=s(4848),i=s(8453);const c={sidebar_position:4},a="Th\u1ef1c H\xe0nh AWS + Open AI",t={},o=[{value:"AWS",id:"aws",level:2},{value:"B\u01b0\u1edbc 1 : T\u1ea1o t\xe0i kho\u1ea3n AWS",id:"b\u01b0\u1edbc-1--t\u1ea1o-t\xe0i-kho\u1ea3n-aws",level:3},{value:"B\u01b0\u1edbc 2 : C\xe0i \u0111\u1eb7t Serverless framework",id:"b\u01b0\u1edbc-2--c\xe0i-\u0111\u1eb7t-serverless-framework",level:3},{value:"B\u01b0\u1edbc 3 : T\u1ea1o project",id:"b\u01b0\u1edbc-3--t\u1ea1o-project",level:3},{value:"B\u01b0\u1edbc 4 : Deploy",id:"b\u01b0\u1edbc-4--deploy",level:3},{value:"C\xe1ch Update",id:"c\xe1ch-update",level:3},{value:"Gi\u1ea3i th\xedch c\xe1c bi\u1ebfn trong serverless.yml",id:"gi\u1ea3i-th\xedch-c\xe1c-bi\u1ebfn-trong-serverlessyml",level:3},{value:"Ch\u1ea1y offline",id:"ch\u1ea1y-offline",level:3},{value:"OpenAI",id:"openai",level:2},{value:"B\u01b0\u1edbc 1 : T\u1ea1o key API",id:"b\u01b0\u1edbc-1--t\u1ea1o-key-api",level:3},{value:"B\u01b0\u1edbc 2 \u1eed Tr\xean Postman",id:"b\u01b0\u1edbc-2-\u1eed-tr\xean-postman",level:3},{value:"T\xedch h\u1ee3p Api Open AI v\xe0o Serverless",id:"t\xedch-h\u1ee3p-api-open-ai-v\xe0o-serverless",level:2},{value:"T\u1ea1o file .env",id:"t\u1ea1o-file-env",level:3},{value:"Th\xeam key v\xe0o file .env <strong>Ho\u1eb7c</strong> th\xeam v\xe0o serverless.yml",id:"th\xeam-key-v\xe0o-file-env-ho\u1eb7c-th\xeam-v\xe0o-serverlessyml",level:3},{value:"C\xe0i \u0111\u1eb7t th\u01b0 vi\u1ec7n",id:"c\xe0i-\u0111\u1eb7t-th\u01b0-vi\u1ec7n",level:3},{value:"Th\xeam v\xe0o handler.js",id:"th\xeam-v\xe0o-handlerjs",level:3},{value:"Th\xeam v\xe0o serverless.yml",id:"th\xeam-v\xe0o-serverlessyml",level:3}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"th\u1ef1c-h\xe0nh-aws--open-ai",children:"Th\u1ef1c H\xe0nh AWS + Open AI"})}),"\n",(0,l.jsx)(n.h2,{id:"aws",children:"AWS"}),"\n",(0,l.jsx)(n.h3,{id:"b\u01b0\u1edbc-1--t\u1ea1o-t\xe0i-kho\u1ea3n-aws",children:"B\u01b0\u1edbc 1 : T\u1ea1o t\xe0i kho\u1ea3n AWS"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Truy c\u1eadp v\xe0o trang ch\u1ee7 c\u1ee7a AWS \u0111\u1ec3 \u0111\u0103ng k\xed : ",(0,l.jsx)(n.a,{href:"https://signin.aws.amazon.com/signup?request_type=register/",children:"AWS-Register"})]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"b\u01b0\u1edbc-2--c\xe0i-\u0111\u1eb7t-serverless-framework",children:"B\u01b0\u1edbc 2 : C\xe0i \u0111\u1eb7t Serverless framework"}),"\n",(0,l.jsxs)(n.p,{children:["\u0110\u1ec3 bi\u1ebft chi ti\u1ebft : ",(0,l.jsx)(n.a,{href:"https://www.serverless.com/framework/docs/getting-started#setting-up-serverless-framework-with-aws",children:"Serverless"})]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["C\xe0i \u0111\u1eb7t npm (Node.js) : ",(0,l.jsx)(n.a,{href:"https://nodejs.org/en/download/",children:"Node.js"})]}),"\n",(0,l.jsx)(n.li,{children:"C\xe0i \u0111\u1eb7t serverless framework"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"  npm i serverless -g\n"})}),"\n",(0,l.jsx)(n.p,{children:"C\xf3 th\u1ec3 ki\u1ec3m tra b\u1eb1ng c\xe1ch g\xf5 l\u1ec7nh sau :"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"  serverless --version\n"})}),"\n",(0,l.jsx)(n.h3,{id:"b\u01b0\u1edbc-3--t\u1ea1o-project",children:"B\u01b0\u1edbc 3 : T\u1ea1o project"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"T\u1ea1o project m\u1edbi"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"  serverless\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Ch\u1ecdn template"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"Serverless \u03df Framework\nWelcome to Serverless Framework V.4\nCreate a new project by selecting a Template to generate scaffolding for a specific use-case.\n? Select A Template: \u2026\n\u276f AWS / Node.js / Starter\n  AWS / Node.js / HTTP API\n  AWS / Node.js / Scheduled Task\n  AWS / Node.js / SQS Worker\n  AWS / Node.js / Express API\n  AWS / Node.js / Express API with DynamoDB\n  AWS / Python / Starter\n  AWS / Python / HTTP API\n  AWS / Python / Scheduled Task\n  AWS / Python / SQS Worker\n  AWS / Python / Flask API\n  AWS / Python / Flask API with DynamoDB\n  (Scroll for more)\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Ch\u1ecdn t\xean project"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"\u221a Name Your Project: \xb7 lambda\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u0110\u0103ng Nh\u1eadp v\xe0o Serverless"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"\u221a Serverless Framework V4 CLI is free for developers and organizations making less than $2 million annually, but requires an account or a license key.\n\nPlease login/register or enter your license key: \xb7 Login/Register\n\u2714 You have successfully signed in.\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Ch\u1ecdn ho\u1eb7c t\u1ea1o app"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"\u221a Create Or Select An Existing App: \xb7 Create A New App\n\n\u221a Name Your New App: \xb7 hdbank\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Setup AWS credentials"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"\u221a AWS Credentials Set-Up Method: \xb7 Create AWS IAM Role (Easy & Recommended)\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Ta c\xf3 d\u1ef1 \xe1n nh\u01b0 name project \u0111\xe3 t\u1ea1o \u1edf tr\xean"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"    cd lambda\n"})}),"\n",(0,l.jsx)(n.h3,{id:"b\u01b0\u1edbc-4--deploy",children:"B\u01b0\u1edbc 4 : Deploy"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Th\xeam --verbose \u0111\u1ec3 xem chi ti\u1ebft"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"  serverless deploy --verbose\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"OR"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"  serverless deploy\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Th\u1eed ch\u1ea1y tr\xean postman"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{alt:"img.png",src:s(9557).A+"",width:"1919",height:"1079"})}),"\n",(0,l.jsx)(n.h3,{id:"c\xe1ch-update",children:"C\xe1ch Update"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"    serverless deploy\n"})}),"\n",(0,l.jsx)(n.h3,{id:"gi\u1ea3i-th\xedch-c\xe1c-bi\u1ebfn-trong-serverlessyml",children:"Gi\u1ea3i th\xedch c\xe1c bi\u1ebfn trong serverless.yml"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"functions:\n  hello: # t\xean function\n    handler: handler.hello # t\xean file v\xe0 t\xean function\n    events:\n      - httpApi: # lo\u1ea1i event (httpApi, http, s3, sqs, sns, schedule)\n          path: / # \u0111\u01b0\u1eddng d\u1eabn\n          method: get # ph\u01b0\u01a1ng th\u1ee9c (get, post, put, delete)\n"})}),"\n",(0,l.jsx)(n.h3,{id:"ch\u1ea1y-offline",children:"Ch\u1ea1y offline"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"C\xe0i \u0111\u1eb7t plugin"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"npm install serverless-offline --save-dev\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Th\xeam v\xe0o serverless.yml"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"plugins:\n  - serverless-offline\n\ncustom: # N\u1ebfu mu\u1ed1n thay \u0111\u1ed5i port m\u1eb7c \u0111\u1ecbnh ( 3000 )\n  serverless-offline:\n    httpPort: 3001\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Ch\u1ea1y"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"  serverless offline\n"})}),"\n",(0,l.jsx)(n.h2,{id:"openai",children:"OpenAI"}),"\n",(0,l.jsx)(n.h3,{id:"b\u01b0\u1edbc-1--t\u1ea1o-key-api",children:"B\u01b0\u1edbc 1 : T\u1ea1o key API"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Truy c\u1eadp v\xe0o trang ch\u1ee7 c\u1ee7a OpenAI \u0111\u1ec3 t\u1ea1o key : ",(0,l.jsx)(n.a,{href:"https://platform.openai.com/settings/api-keys",children:"APIKeys"})]}),"\n"]}),"\n",(0,l.jsxs)(n.h3,{id:"b\u01b0\u1edbc-2-\u1eed-tr\xean-postman",children:["B\u01b0\u1edbc 2 ",":Th","\u1eed Tr\xean Postman"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"dall 3e : t\u1ea1o h\xecnh \u1ea3nh t\u1eeb m\xf4 t\u1ea3"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{alt:"img_1.png",src:s(2285).A+"",width:"1916",height:"1079"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:"completions : c\xf3 th\u1ec3 \u1ee9ng d\u1ee5ng l\xe0m chatbot ,..."}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{alt:"img_2.png",src:s(518).A+"",width:"1919",height:"1079"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"t\xedch-h\u1ee3p-api-open-ai-v\xe0o-serverless",children:"T\xedch h\u1ee3p Api Open AI v\xe0o Serverless"}),"\n",(0,l.jsx)(n.h3,{id:"t\u1ea1o-file-env",children:"T\u1ea1o file .env"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"  touch .env\n"})}),"\n",(0,l.jsxs)(n.h3,{id:"th\xeam-key-v\xe0o-file-env-ho\u1eb7c-th\xeam-v\xe0o-serverlessyml",children:["Th\xeam key v\xe0o file .env ",(0,l.jsx)(n.strong,{children:"Ho\u1eb7c"})," th\xeam v\xe0o serverless.yml"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:".env"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"  OPENAI_API_KEY=sk-...\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"serverless.yml"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"provider:\n  environment:\n    OPENAI_API_KEY: sk-....\n"})}),"\n",(0,l.jsx)(n.h3,{id:"c\xe0i-\u0111\u1eb7t-th\u01b0-vi\u1ec7n",children:"C\xe0i \u0111\u1eb7t th\u01b0 vi\u1ec7n"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"  npm install axios\n"})}),"\n",(0,l.jsx)(n.h3,{id:"th\xeam-v\xe0o-handlerjs",children:"Th\xeam v\xe0o handler.js"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:"import axios from 'axios';\nimport dotenv from 'dotenv';\ndotenv.config();\n\nexport async function callOpenAI (event) {\n  const { messages } = JSON.parse(event.body);\n  try {\n    const response = await axios.post('https://api.openai.com/v1/chat/completions', {\n      model: 'gpt-4-1106-preview',\n      messages: messages,\n      temperature: 0.7,\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        'Authorization': `Bearer ${process.env.OPENAI_API_KEY}`\n      }\n    });\n    return response.data.choices[0].message.content;\n  } catch (error) {\n    console.error(error);\n    throw new Error(\"Failed to call OpenAI API\");\n  }\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"th\xeam-v\xe0o-serverlessyml",children:"Th\xeam v\xe0o serverless.yml"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"  competition:\n    handler: handler.callOpenAI\n    events:\n      - httpApi:\n          path: /competition\n          method: post\n          cors: true\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{alt:"img_3.png",src:s(4319).A+"",width:"1919",height:"1079"})})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},9557:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/img-cba3e1552d2f3ea101cefdd479c98787.png"},2285:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/img_1-61fccb418f94e3d1c4c0851c9751dfb2.png"},518:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/img_2-c8f5ea8f1aca8863459114fb477ab3e2.png"},4319:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/img_3-2a485465eec2770880b5d81a2e8c0543.png"},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>a});var r=s(6540);const l={},i=r.createContext(l);function c(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:c(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);